# Инструкция для AI по проекту DroneApp

- Проект: мобильное MVP «DroneDelivery» на Flutter (Android/iOS) — клиентский фронтенд без бэкенда. Опора на ТЗ в `./.github/instructions/description.md`.
- Главная фича: отслеживание дрона на карте; все данные пока в оперативной памяти (после перезапуска корзина/статус очищаются).

## Архитектура и экраны
- 4 экрана: `CatalogScreen`, `CartScreen`, `CheckoutScreen`, `TrackingScreen`; навигация через BottomNavigationBar или прямые переходы.
- Каталог: сетка/список карточек с фото, названием, ценой (₸), весом (г/кг), кнопкой «В корзину»; на иконке корзины нужен бейдж-счётчик.
- Корзина: список позиций с +/-; блоки «Итого (цена)» и «Общий вес». Если вес > 3 кг — кнопка оформления блокируется и показывается предупреждение «Перегруз».
- Оформление: карта с маркером по умолчанию в центре Алматы; выбор способа доставки (Switch: киоск/лебёдка); кнопка-заглушка «Оплатить Apple Pay» меняет статус на «Оплачено».
- Трекинг: полноэкранная карта (flutter_map / OSM), маркеры склада (А), клиента (Б), дрона (анимируется); панель статуса (пример: «Дрон вылетел», «Высота 50м», «ETA: 5 мин»); по прилёту показывать QR.

## Данные и модели
- Хранить модели в `lib/models/`:
  - `Product { id, title, price, weight(grams), imageUrl }`
  - `CartItem { product, quantity }`
  - `Order { id, items, totalWeight, GeoPoint destination, status('processing'|'flying'|'delivered') }`
- Емкость дрона: 3 кг (3000 г). Пересчитывать суммарный вес при каждом изменении корзины.

## Логика и паттерны
- Калькулятор корзины: при превышении 3 кг возвращать ошибку/блокировать оформление; UI обязан сигнализировать «Перегруз».
- Симуляция полёта: взять точки Start (склад) и End (клиент), интерполировать ~100 промежуточных точек; `Timer` с шагом ~200 мс сдвигает маркер дрона по списку.
- QR-код: использовать `qr_flutter`, контент — строка на основе ID заказа (напр. `ORDER_123_SECRET_KEY`).
- Для состояния можно начать с простого ин-мемори синглтона/`ChangeNotifier`; после перезапуска всё сбрасывается — это допустимо для MVP.

## Карты и координаты
- Библиотека: `flutter_map` с OpenStreetMap тайлами; при необходимости указывать user-agent для OSM-политик.
- Центр карты по умолчанию — Алматы (задать явные координаты в коде). Маркеры склада/клиента фиксированы для демо, дрон движется между ними.

## Разработка
- Минимальные команды: `flutter pub get`; `flutter run -d <device>`; `flutter test` (когда добавятся тесты).
- Держите лейаут адаптивным под телефон; тяжелые ассеты не нужны — можно использовать заглушки/placeholder-изображения.

## Где искать требования
- Подробное ТЗ: `./.github/instructions/description.md`. При сомнениях сверять поведение с этим документом.
